 //在浏览器中访问localhost:3000/register.html,打开register.html页面 app.get('/register.html', function(req, res) { res.sendFile(__dirname + "/" + "register.html"); }) //创建实现注册功能的路由 app.get('/process_get', function(req, res) { //获取用户输入的账号，密码，姓名 var response = { "account":
req.query.account, "password": req.query.password, "name": req.query.name }; //创建增加数据的sql语句实现注册功能 var addSql = 'INSERT INTO user(account,password,name) VALUES(?,?,?)'; //获取用户输入的数据 var addSqlParams = [req.query.account, req.query.password, req.query.name];
connection.query(addSql, addSqlParams, function(err, result) { //如果插入数据失败，则注册失败，否则注册成功 if (err) { console.log('[INSERT ERROR] - ', err.message); res.end("fail"); //如果失败就直接return不会执行下面的代码 return; } res.end("success"); console.log("注册成功"); }); console.log(response);
})